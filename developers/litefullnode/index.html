<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://tronprotocol.github.io/documentation-en/developers/litefullnode/" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>Lite Fullnode - Java Tron</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Lite Fullnode";
        var mkdocs_page_input_path = "developers/litefullnode.md";
        var mkdocs_page_url = "/documentation-en/developers/litefullnode/";
      </script>
    
    <script src="../../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> Java Tron
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">Getting Started</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../getting_started/getting_started_with_javatron/">Getting Started with Java-tron</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Using Java-tron</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../../using_javatron/installing_javatron/">Deploying Java-tron</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../using_javatron/backup_restore/">Backup & Restore</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="./">Lite Fullnode</a>
    <ul class="current">
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../using_javatron/private_network/">Private Network</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">Event Subscription</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../architecture/event/">Using Event Plugin</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../using_javatron/builtin_message_queue/">Use the Built-in Message Queue</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../architecture/database/">Database Configuration</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../using_javatron/connecting_to_tron/">Network Configuration</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../using_javatron/metrics/">Node Monitoring</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">Tools</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../using_javatron/toolkit/">Database Partition</a>
                </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">API</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../api/http/">HTTP API</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../api/rpc/">gRPC API</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Core Protocol</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../introduction/dpos/">DPoS</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../mechanism-algorithm/sr/">Super Representative</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../mechanism-algorithm/account/">Account Model</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../mechanism-algorithm/resource/">Resource Model</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../contracts/contract/">Smart Contract</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../mechanism-algorithm/dex/">Decentralized Exchange</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../mechanism-algorithm/multi-signatures/">Multi-Signature</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">For Java-tron Developers</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../java-tron/">Developer Guide</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tips/">TIPs Workflow</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../issue-workflow/">Issue Workflow</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../governance/">Governance Workflow</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../run-in-idea/">Configure the IDE</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../demo/">Development Example</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">Core Modules</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../code-structure/">Overview</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../chainbase/">Chainbase</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../network/">Network</a>
                </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">For DAPP developers</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../contracts/compiler/">Dapp Development Tool</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Wallet-cli</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../clients/wallet-cli/">What is Wallet-CLI</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../clients/wallet-cli-command/">Wallet Commands</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Releases</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../releases/upgrade-instruction/">Deployment Manual for the New Version</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../releases/signature_verification/">Integrity Check</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">History</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../releases/GreatVoyage-v471/">GreatVoyage-v4.7.1</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../releases/GreatVoyage-v470/">GreatVoyage-v4.7.0.1</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../releases/GreatVoyage-v460/">GreatVoyage-v4.6.0</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../releases/GreatVoyage-v452/">GreatVoyage-v4.5.2</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../releases/GreatVoyage-v451/">GreatVoyage-v4.5.1</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../releases/GreatVoyage-v446/">GreatVoyage-v4.4.6</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../releases/GreatVoyage-v445/">GreatVoyage-v4.4.5</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../releases/GreatVoyage-v444/">GreatVoyage-v4.4.4</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../releases/GreatVoyage-v442/">GreatVoyage-v4.4.2</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../releases/GreatVoyage-v440/">GreatVoyage-v4.4.0</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../releases/GreatVoyage-v430/">GreatVoyage-v4.3.0</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../releases/GreatVoyage-v4221/">GreatVoyage-v4.2.2.1</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../releases/GreatVoyage-v422/">GreatVoyage-v4.2.2</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../releases/GreatVoyage-v420/">GreatVoyage-v4.2.0</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../releases/GreatVoyage-v413/">GreatVoyage-v4.1.3</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../releases/GreatVoyage-v412/">GreatVoyage-v4.1.2</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../releases/GreatVoyage-v411/">GreatVoyage-v4.1.1</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../releases/GreatVoyage-v400/">GreatVoyage-v4.0.0</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../releases/Odyssey-v37/">Odyssey-v3.7</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../releases/Odyssey-v365/">Odyssey-v3.6.5</a>
                </li>
    </ul>
                  </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../glossary/">Glossary</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">Java Tron</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" alt="Docs"></a> &raquo;</li>
          <li>Using Java-tron &raquo;</li><li>Lite Fullnode</li>
    <li class="wy-breadcrumbs-aside">
        <a href="https://github.com/tronprotocol/documentation-en/edit/master/docs/developers/litefullnode.md"
          class="icon icon-github"> Edit on GitHub</a>
    </li>
  </ul>
  <hr/>
</div>

          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="lite-fullnode">Lite FullNode<a class="headerlink" href="#lite-fullnode" title="Permanent link">&para;</a></h1>
<p>Lite FullNode runs the same code with FullNode, the difference is that Lite FullNode only starts based on state data snapshot, which only contains all account state data and historical data of the last 256 blocks. Moreover, during the running of the node, only the data related to the state data snapshot is stored, and the historical data of blocks and transactions are not saved. Therefore, Lite Fullnode has the advantages of occupying less disk space and startting up fast, but it does not provide historical block and transaction data query, and only provides part of HTTP API and GRPC API of fullnode. For APIs that are not supported by Lite Fullnode, please refer to <a href="https://github.com/tronprotocol/java-tron/blob/develop/framework/src/main/java/org/tron/core/services/filter/LiteFnQueryHttpFilter.java">HTTP</a>, <a href="https://github.com/tronprotocol/java-tron/blob/develop/framework/src/main/java/org/tron/core/services/filter/LiteFnQueryGrpcInterceptor.java">GRPC</a>. These APIs can be forced open by configuring <code>openHistoryQueryWhenLiteFN = true</code> in the configuration file, but this is not recommended.</p>
<p>Therefore, if developers only need to use nodes for block synchronization, processing and broadcasting transactions, then Lite Fullnoe will be a better choice.</p>
<p>The deployment steps of a Lite fullnode are the same as fullnode. The difference is that the light node database needs to be obtained. You can directly download the light node data snapshot from the <a href="../../using_javatron/backup_restore/#lite-fullnode-data-snapshot">public backup data</a> and use it directly; you can also use the lite fulnode tool to convert the fullnode database to lite fullnode database. The use of the light node tool will be described in detail below.</p>
<h1 id="lite-fullnode-tool">Lite FullNode Tool<a class="headerlink" href="#lite-fullnode-tool" title="Permanent link">&para;</a></h1>
<p>Lite FullNode Tool is used to split the database of a FullNode into a <code>Snapshot dataset</code> and a <code>History dataset</code>.</p>
<ul>
<li><code>Snapshot dataset</code>: the minimum dataset for quick startup of the Lite FullNode.</li>
<li><code>History dataset</code>: the archive dataset that used for historical data queries.</li>
</ul>
<p>Before using this tool for any operation, you need to stop the currently running FullNode process first. This tool provides the function of splitting the complete data into two datasets according to the current <code>latest block height</code> (latest_block_number). Lite FullNode launched from snapshot datasets do not support querying historical data prior to this block height. The tool also provides the ability to merge historical datasets with snapshot datasets.</p>
<p>For more design details, please refer to: <a href="https://github.com/tronprotocol/tips/issues/128">TIP-128</a>.</p>
<h3 id="obtain-lite-fullnode-tool">Obtain Lite Fullnode Tool<a class="headerlink" href="#obtain-lite-fullnode-tool" title="Permanent link">&para;</a></h3>
<p>LiteFullNodeTool.jar can be obtained by compiling the java-tron source code, the steps are as follows:</p>
<ol>
<li>Obtain java-tron source code
    <div class="highlight"><pre><span></span><code>$ git clone https://github.com/tronprotocol/java-tron.git
$ git checkout -t origin/master
</code></pre></div></li>
<li>
<p>Compile
    <div class="highlight"><pre><span></span><code>$ cd java-tron
$ ./gradlew clean build -x test
</code></pre></div></p>
<p>After compiling, <code>LiteFullNodeTool.jar</code> will be generated in the <code>java-tron/build/libs/</code> directory.</p>
</li>
</ol>
<h3 id="use-lite-fullnode-tool">Use Lite Fullnode tool<a class="headerlink" href="#use-lite-fullnode-tool" title="Permanent link">&para;</a></h3>
<p><strong>Options</strong></p>
<p>This tool provides independent cutting of <code>Snapshot Dataset</code> and <code>History Dataset</code> and a merge function.</p>
<ul>
<li><code>--operation | -o</code>: [ split | merge ] specifies the operation as either to split or to merge</li>
<li><code>--type | -t</code>: [ snapshot | history ] is used only with <code>split</code> to specify the type of the dataset to be split; snapshot refers to Snapshot Dataset and history refers to History Dataset.</li>
<li><code>--fn-data-path</code>: FullNode database directory</li>
<li><code>--dataset-path</code>: dataset directory, when operation is <code>split</code>, <code>dataset-path</code> is the path that store the <code>Snapshot Dataset</code> or <code>History Dataset</code>,
otherwise <code>dataset-path</code> should be the <code>History Dataset</code> path.</li>
</ul>
<p><strong>Examples</strong></p>
<p>Start a new FullNode using the default config, then an <code>output-directory</code> will be produced in the current directory.
<code>output-directory</code> contains a sub-directory named <code>database</code> which is the database to be split.</p>
<ul>
<li>
<p><strong>Split and get a <code>Snapshot Dataset</code></strong></p>
<p>First, stop the FullNode and execute:
<div class="highlight"><pre><span></span><code>// just for simplify, locate the snapshot into `/tmp` directory,
$ java -jar LiteFullNodeTool.jar -o split -t snapshot --fn-data-path output-directory/database --dataset-path /tmp
</code></pre></div>
then a <code>snapshot</code> directory will be generated in <code>/tmp</code>, pack this directory and copy it to somewhere that is ready to run a Lite Fullnode.
Do not forget rename the directory from <code>snapshot</code> to <code>database</code>.
(the default value of the storage.db.directory is <code>database</code>, make sure rename the snapshot to the specified value)</p>
</li>
<li>
<p><strong>Split and get a <code>History Dataset</code></strong></p>
<p>If historical data query is needed, <code>History dataset</code> should be generated and merged into Lite FullNode.
<div class="highlight"><pre><span></span><code>// just for simplify, locate the history into `/tmp` directory,
$ java -jar LiteFullNodeTool.jar -o split -t history --fn-data-path output-directory/database --dataset-path /tmp
</code></pre></div>
A <code>history</code> directory will be generated in <code>/tmp</code>, pack this directory and copy it to a Lite Fullnode.
<code>History dataset</code> always take a large storage, make sure the disk has enough volume to store the <code>History dataset</code>.</p>
</li>
<li>
<p><strong>Merge <code>History Dataset</code> and <code>Snapshot Dataset</code></strong></p>
<p>Both <code>History Dataset</code> and <code>Snapshot Dataset</code> have an info.properties file to identify the block height from which they are segmented.
Make sure that the <code>split_block_num</code> in <code>History Dataset</code> is not less than the corresponding value in the <code>Snapshot Dataset</code>.</p>
<p>After getting the <code>History dataset</code>, the Lite FullNode can merge the <code>History dataset</code> and become a real FullNode.
<div class="highlight"><pre><span></span><code>// just for simplify, assume `History dataset` is locate in /tmp
$ java -jar LiteFullNodeTool.jar -o merge --fn-data-path output-directory/database --dataset-path /tmp/history
</code></pre></div></p>
</li>
</ul>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../../using_javatron/backup_restore/" class="btn btn-neutral float-left" title="Backup & Restore"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../../using_javatron/private_network/" class="btn btn-neutral float-right" title="Private Network">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/tronprotocol/documentation-en" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href="../../using_javatron/backup_restore/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../../using_javatron/private_network/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme_extra.js" defer></script>
    <script src="../../js/theme.js" defer></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" defer></script>
      <script src="../../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
